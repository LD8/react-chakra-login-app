(this["webpackJsonpreact-chakra-login-component"]=this["webpackJsonpreact-chakra-login-component"]||[]).push([[0],{276:function(e,t,r){"use strict";r.r(t);var s=r(4),c=r(0),n=r(46),i=r.n(n),a=r(15),o=r.n(a),l=r(27),j=r(3),d=r(301),b=r(306),u=r(61),h=r(292),p=r(293),x=r(308),O=r(294),m=r(305),f=r(303),w=r(296),g=r.p+"static/media/wechat.96c7538f.svg",v=r.p+"static/media/tencentqq.372538a8.svg",y=r(145),k=r(290),S=r(291),_=r(307),F=function(){var e=Object(y.c)(),t=e.colorMode,r=e.toggleColorMode;return Object(s.jsxs)(b.b,{spacing:6,w:"full",children:[Object(s.jsxs)(m.a,{w:"100%",onClick:r,children:["Color Mode ",t.toUpperCase()]}),Object(s.jsx)(k.a,{}),Object(s.jsxs)(b.a,{spacing:5,children:[Object(s.jsx)(S.a,{isExternal:!0,href:"https://open.weixin.qq.com/connect/qrconnect?appid=wxe9199d568fe57fdd&client_id=wxe9199d568fe57fdd&redirect_uri=https%3A%2F%2Fwww.jianshu.com%2Fusers%2Fauth%2Fwechat%2Fcallback&response_type=code&scope=snsapi_login&state=%257B%257D#wechat_redirect",children:Object(s.jsx)(_.a,{src:g,filter:"invert(60%)",style:{transition:"all 0.1s ease-in-out"},_hover:{filter:"invert(50%)"}})}),Object(s.jsx)(S.a,{isExternal:!0,href:"https://graph.qq.com/oauth2.0/show?which=Login&display=pc&client_id=100410602&redirect_uri=https%3A%2F%2Fwww.jianshu.com%2Fusers%2Fauth%2Fqq_connect%2Fcallback&response_type=code&state=%257B%257D",children:Object(s.jsx)(_.a,{src:v,filter:"invert(60%)",style:{transition:"all 0.1s ease-in-out"},_hover:{filter:"invert(50%)"}})})]})]})},q=r(82),C=r(140),E=r.n(C).a.create({baseURL:"https://conduit.productionready.io/api",timeout:15e3}),L=function(e){return E({method:"POST",url:"/users/login",data:{user:e}})},M=function(e){return E({method:"POST",url:"/users",data:{user:e}})},P=r(144),U=r(50),I=r(80);function R(e){var t,r,n,i=e.isLogin,a=void 0!==i&&i,g=Object(c.useState)(!1),v=Object(j.a)(g,2),y=v[0],k=v[1],S=U.a({username:a?U.b().min(6).max(15):U.b().min(6).max(15).required(),email:U.b().email().required(),password:U.b().min(6).max(50).required()}),_=Object(I.b)({resolver:Object(P.yupResolver)(S)}),C=_.handleSubmit,E=_.errors,R=_.register,B=_.formState,T=Object(d.a)(),A=function(){var e=Object(l.a)(o.a.mark((function e(t){var r,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!a){e.next=7;break}return e.next=4,L(t);case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,M(t);case 9:e.t0=e.sent;case 10:r=e.t0,(s=r.data).user&&s.user.token&&(T({position:"top",description:"".concat(a?"Login":"Sign up"," successfully: ").concat(s.user.username.toUpperCase()),status:"info",duration:9e3,isClosable:!0}),setTimeout((function(){window.open("https://donlee.online","_blank").focus()}),2500)),e.next=19;break;case 15:e.prev=15,e.t1=e.catch(0),c=e.t1.response.data.errors,Object.keys(c).forEach((function(e){c[e].forEach((function(t){T({position:"top",description:"".concat(e," ").concat(t),status:"error",duration:9e3,isClosable:!0})}))}));case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsx)("form",{onSubmit:C(A),children:Object(s.jsxs)(b.b,{spacing:6,mt:4,children:[!a&&Object(s.jsx)(b.b,{w:"full",children:Object(s.jsxs)(u.a,{isInvalid:E.username,children:[Object(s.jsxs)(h.a,{children:[Object(s.jsx)(p.a,{pointerEvents:"none",children:Object(s.jsx)(q.c,{color:"gray.700"})}),Object(s.jsx)(x.a,{placeholder:"Please enter username",name:"username",ref:R})]}),Object(s.jsx)(O.a,{children:null===(t=E.username)||void 0===t?void 0:t.message})]})}),Object(s.jsx)(b.b,{w:"full",children:Object(s.jsxs)(u.a,{isInvalid:E.email,children:[Object(s.jsxs)(h.a,{children:[Object(s.jsx)(p.a,{pointerEvents:"none",children:Object(s.jsx)(q.a,{color:"gray.700"})}),Object(s.jsx)(x.a,{type:"email",placeholder:"Please enter your email",name:"email",ref:R})]}),Object(s.jsx)(O.a,{children:null===(r=E.email)||void 0===r?void 0:r.message})]})}),Object(s.jsx)(b.b,{w:"full",children:Object(s.jsxs)(u.a,{isInvalid:E.password,children:[Object(s.jsxs)(h.a,{children:[Object(s.jsx)(p.a,{pointerEvents:"none",children:Object(s.jsx)(q.b,{color:"gray.700"})}),Object(s.jsx)(x.a,{pr:"4.5rem",type:y?"text":"password",placeholder:"Please enter password",name:"password",ref:R}),Object(s.jsx)(p.b,{width:"4.5rem",children:Object(s.jsx)(m.a,{h:"1.75rem",size:"sm",onClick:function(){return k(!y)},children:y?"Hide":"Show"})})]}),Object(s.jsx)(O.a,{children:null===(n=E.password)||void 0===n?void 0:n.message})]})}),a&&Object(s.jsx)(f.a,{colorScheme:"teal",w:"full",pl:"3",children:Object(s.jsx)(w.a,{ml:"1",children:"Remember me"})}),Object(s.jsx)(m.a,{w:"100%",colorScheme:"teal",type:"submit",isLoading:B.isSubmitting,children:a?"Login":"Sign Up"}),Object(s.jsx)(F,{})]})})}var B=r(297),T=r(298),A=r(302),D=function(){return Object(s.jsx)(B.a,{w:"100vw",h:"100vh",pb:10,children:Object(s.jsx)(T.a,{children:Object(s.jsx)(T.a,{mb:50,pt:3,pb:5,w:"370px",bg:Object(y.d)("gray.50","gray.700"),borderRadius:"lg",boxShadow:"dark-lg",children:Object(s.jsxs)(A.e,{isFitted:!0,px:2,children:[Object(s.jsxs)(A.b,{children:[Object(s.jsx)(A.a,{_focus:{},children:"Login"}),Object(s.jsx)(A.a,{_focus:{},children:"Sign Up"})]}),Object(s.jsxs)(A.d,{children:[Object(s.jsx)(A.c,{children:Object(s.jsx)(R,{isLogin:!0})}),Object(s.jsx)(A.c,{children:Object(s.jsx)(R,{})})]})]})})})})},J=r(304),z=r(300),H=r(299),G=Object(H.a)({config:{initialColorMode:"dark",useSystemColorMode:!0}});i.a.render(Object(s.jsxs)(J.a,{theme:G,children:[Object(s.jsx)(z.a,{initialColorMode:G.config.initialColorMode}),Object(s.jsx)(D,{})]}),document.getElementById("root"))}},[[276,1,2]]]);
//# sourceMappingURL=main.602892ee.chunk.js.map